{"version":3,"sources":["plugins/explode.js"],"names":["define","langx","$","effects","options","done","childComplete","pieces","push","this","length","rows","cells","animComplete","element","css","visibility","remove","i","j","left","top","mx","my","Math","round","sqrt","mode","show","offset","width","ceil","outerWidth","height","outerHeight","clone","appendTo","wrap","position","parent","addClass","overflow","opacity","animate","duration","easing"],"mappings":";;;;;;;AAAAA,QACC,sBACA,sBACA,cACE,SAASC,EAAMC,EAAEC,GACpB,MAAOA,GAAQH,OAAQ,UAAW,OAAQ,SAAUI,EAASC,GAkB5D,QAASC,KACRC,EAAOC,KAAMC,MACRF,EAAOG,SAAWC,EAAOC,GAC7BC,IA+CF,QAASA,KACRC,EAAQC,KACPC,WAAY,YAEbd,EAAGK,GAASU,SACZZ,IAvED,GAAIa,GAAGC,EAAGC,EAAMC,EAAKC,EAAIC,EACxBZ,EAAOP,EAAQG,OAASiB,KAAKC,MAAOD,KAAKE,KAAMtB,EAAQG,SAAa,EACpEK,EAAQD,EACRG,EAAUZ,EAAGO,MACbkB,EAAOvB,EAAQuB,KACfC,EAAgB,SAATD,EAGPE,EAASf,EAAQc,OAAOb,IAAK,aAAc,UAAWc,SAGtDC,EAAQN,KAAKO,KAAMjB,EAAQkB,aAAepB,GAC1CqB,EAAST,KAAKO,KAAMjB,EAAQoB,cAAgBvB,GAC5CJ,IAWD,KAAMW,EAAI,EAAGA,EAAIP,EAAMO,IAItB,IAHAG,EAAMQ,EAAOR,IAAMH,EAAIe,EACvBV,EAAKL,GAAMP,EAAO,GAAM,EAElBQ,EAAI,EAAGA,EAAIP,EAAOO,IACvBC,EAAOS,EAAOT,KAAOD,EAAIW,EACzBR,EAAKH,GAAMP,EAAQ,GAAM,EAIzBE,EACEqB,QACAC,SAAU,QACVC,KAAM,eACNtB,KACAuB,SAAU,WACVtB,WAAY,UACZI,MAAOD,EAAIW,EACXT,KAAMH,EAAIe,IAKVM,SACCC,SAAU,sBACVzB,KACAuB,SAAU,WACVG,SAAU,SACVX,MAAOA,EACPG,OAAQA,EACRb,KAAMA,GAASQ,EAAON,EAAKQ,EAAQ,GACnCT,IAAKA,GAAQO,EAAOL,EAAKU,EAAS,GAClCS,QAASd,EAAO,EAAI,IAEpBe,SACAvB,KAAMA,GAASQ,EAAO,EAAIN,EAAKQ,GAC/BT,IAAKA,GAAQO,EAAO,EAAIL,EAAKU,GAC7BS,QAASd,EAAO,EAAI,GAClBxB,EAAQwC,UAAY,IAAKxC,EAAQyC,OAAQvC","file":"../../plugins/explode.js","sourcesContent":["define( [\n\t\"skylark-langx/langx\",\n\t\"skylark-utils/query\",\n\t\"../effects\"\n], function(langx,$,effects) {\nreturn effects.define( \"explode\", \"hide\", function( options, done ) {\n\n\tvar i, j, left, top, mx, my,\n\t\trows = options.pieces ? Math.round( Math.sqrt( options.pieces ) ) : 3,\n\t\tcells = rows,\n\t\telement = $( this ),\n\t\tmode = options.mode,\n\t\tshow = mode === \"show\",\n\n\t\t// Show and then visibility:hidden the element before calculating offset\n\t\toffset = element.show().css( \"visibility\", \"hidden\" ).offset(),\n\n\t\t// Width and height of a piece\n\t\twidth = Math.ceil( element.outerWidth() / cells ),\n\t\theight = Math.ceil( element.outerHeight() / rows ),\n\t\tpieces = [];\n\n\t// Children animate complete:\n\tfunction childComplete() {\n\t\tpieces.push( this );\n\t\tif ( pieces.length === rows * cells ) {\n\t\t\tanimComplete();\n\t\t}\n\t}\n\n\t// Clone the element for each row and cell.\n\tfor ( i = 0; i < rows; i++ ) { // ===>\n\t\ttop = offset.top + i * height;\n\t\tmy = i - ( rows - 1 ) / 2;\n\n\t\tfor ( j = 0; j < cells; j++ ) { // |||\n\t\t\tleft = offset.left + j * width;\n\t\t\tmx = j - ( cells - 1 ) / 2;\n\n\t\t\t// Create a clone of the now hidden main element that will be absolute positioned\n\t\t\t// within a wrapper div off the -left and -top equal to size of our pieces\n\t\t\telement\n\t\t\t\t.clone()\n\t\t\t\t.appendTo( \"body\" )\n\t\t\t\t.wrap( \"<div></div>\" )\n\t\t\t\t.css( {\n\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\tvisibility: \"visible\",\n\t\t\t\t\tleft: -j * width,\n\t\t\t\t\ttop: -i * height\n\t\t\t\t} )\n\n\t\t\t\t// Select the wrapper - make it overflow: hidden and absolute positioned based on\n\t\t\t\t// where the original was located +left and +top equal to the size of pieces\n\t\t\t\t.parent()\n\t\t\t\t\t.addClass( \"ui-effects-explode\" )\n\t\t\t\t\t.css( {\n\t\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\t\toverflow: \"hidden\",\n\t\t\t\t\t\twidth: width,\n\t\t\t\t\t\theight: height,\n\t\t\t\t\t\tleft: left + ( show ? mx * width : 0 ),\n\t\t\t\t\t\ttop: top + ( show ? my * height : 0 ),\n\t\t\t\t\t\topacity: show ? 0 : 1\n\t\t\t\t\t} )\n\t\t\t\t\t.animate( {\n\t\t\t\t\t\tleft: left + ( show ? 0 : mx * width ),\n\t\t\t\t\t\ttop: top + ( show ? 0 : my * height ),\n\t\t\t\t\t\topacity: show ? 1 : 0\n\t\t\t\t\t}, options.duration || 500, options.easing, childComplete );\n\t\t}\n\t}\n\n\tfunction animComplete() {\n\t\telement.css( {\n\t\t\tvisibility: \"visible\"\n\t\t} );\n\t\t$( pieces ).remove();\n\t\tdone();\n\t}\n} );\n\n});\n"]}